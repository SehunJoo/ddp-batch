#!/bin/bash

seed='Li'

## options to set the number of cores

opts="-M 4  -O 4"                                   

## options for dataset construction - random

opts="${opts} -f 1000"                      # number of strctures

## options for dataset construction - local minima

opts="${opts} -n 5"                         # number of cycles
opts="${opts} -m 100 -p 0.0001 -l 0.0 -R"   # number of structures & pressure
opts="${opts} -d 0.0 -w 600"                # deviation bias
opts="${opts} -a 0.02 -j 10"                # jiggling
#opts="${opts} -T none -S 1 -t 10"           # thermalising

## options for dataset

#opts="${opts} -D 0"                        # number of data
opts="${opts} -E 10.0"                      # energy window

## options for feature vectors

opts="${opts} -r 3.75 -B 3 -P 5 -L 2 -H 10"
#opts="${opts} -A"

## options for training

opts="${opts} -N 5 -C 1 -F 256"
#opts="${opts} -x 0.5 -u 0"

########
# MAIN #
########

nohup chain-batch ${opts} -s $seed &
#nohup chain-batch-bakres ${opts} -s $seed &

echo $! > .pid


#  iteratively generate a data derived potential
#   -c             clean up (deletes files)
#   -D ndata       truncate dataset
#   -n ncycles     number of cycles
#   -p pressure    target pressure (high)
#   -l lowpress    target pressure (low)
#   -R prand       randomise pressure
#   -r rcut        cutoff for features
#   -f full        number of fully random structures
#   -m minima      number of local minima each cycle
#   -b nbest       best of nbest minima retained
#   -d deviation   deviation bias
#   -w waitseconds how long to wait for minima before reducing deviation bias
#   -j jiggles     number of jiggles of local minima
#   -J Jiggles     number of jiggles of marker structures
#   -a amp         amplitude for jiggling
#   -T temp        temperature for thermalising
#   -S step        time step for thermalising (fs)
#   -t time        time for thermalising (ps)
#   -P npoly       number of polynomials
#   -L lowexp      lowest exponent
#   -H highexp     highest exponent
#   -B nbody       highest body order
#   -N nnodes      number of nodes in hidden layer
#   -E deltae      energy window
#   -C compress    compress input by factor [1]
#   -M mpinp       number of remote MPI cores
#   -O ompnp       number of remote OMP cores
#   -F minpot      approximate floor for the number of potentials
#   -A             mean features - no active learning
#   -x             energy normalisation natom exponent (default 0.5)
#   -u             size of composition embedding space (0)
#   -k             keep intermediate files
#   -e             send email to address when completed
#   -s seed        seedname
